<!doctype html>
<html lang="tr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Blog Detay</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body class="bg-light">

<div class="container py-5">
    <a href="index.html" class="btn btn-outline-dark mb-4">&larr; Ana Sayfaya Dön</a>
    
    <div id="loading" class="text-center">Yükleniyor...</div>
    
    <article id="blogContent" class="bg-white p-5 rounded shadow-sm d-none">
        <img id="postImage" src="" class="img-fluid w-100 rounded mb-4" style="max-height: 400px; object-fit: cover; display: none;">
        <h1 id="postTitle" class="fw-bold mb-3"></h1>
        <div id="postDate" class="text-muted mb-4 small"></div>
        <div id="postBody" class="lead fs-6 text-dark"></div>
    </article>
</div>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const postId = urlParams.get('id');

    fetch('blog.json')
        .then(response => response.json())
        .then(data => {
            // CMS "posts" dizisi içine yazar
            const post = data.posts[postId]; 

            if (post) {
                document.getElementById('loading').classList.add('d-none');
                document.getElementById('blogContent').classList.remove('d-none');
                
                document.getElementById('postTitle').innerText = post.title;
                document.getElementById('postDate').innerText = post.date;
                document.getElementById('postBody').innerHTML = marked.parse(post.body);
                
                if(post.image) {
                    const img = document.getElementById('postImage');
                    img.src = post.image; // CMS resim yolunu otomatik ayarlar
                    img.style.display = 'block';
                }
            } else {
                document.getElementById('loading').innerText = "Yazı bulunamadı.";
            }
        });
</script>
</body>
</html>